<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="refresh" content="30; url=#">
        <title>Dashboard</title>
    </head>
    <body style="background-color: #ffffff">
        <nav class="navbar sticky-top navbar-light shadow" style="background-color: #3700B3;">
            <form method="post" action="/signout/" name="signoutForm">
                <a class="navbar-brand" style="color: #ffffff" href="#" onclick="document.signoutForm.submit()">Logout</a>
            </form>
            <form method="post" action="/settings/" name="settingsForm">
                <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fa fa-cog" style="color: #ffffff" onclick="document.settingsForm.submit()"></i></a>
                    </li>
                </ul>
            </form>
        </nav>
        <div class="card-columns m-3">
            <%if (widget.meteo.state == true && widget.meteo.data.temp != null) { %>
                <div class="card shadow rounded" style="background-color: #ffffff;">
                    <div class="card-header" style="background-color: #6200ee;color: #ffffff;">
                        <img src="https://www.freeiconspng.com/uploads/weather-icon-png-16.png" width="30" height="30">
                        What is the weather like in <i class="font-weight-bold"><%= widget.meteo.data.city %></i>, today ?
                    </div>
                    <div class="card-body">
                        <%= 'At ' + widget.meteo.data.city + ',' %>
                        <%= 'It\'s ' + widget.meteo.data.temp + 'Â°C.'%>
                        <div>
                            <%= widget.meteo.data.state %>
                            <img style="width: 50px;height: 50px;" src="<%= 'http://openweathermap.org/img/w/' + widget.meteo.data.icon + '.png' %>">
                        </div>
                    </div>
                </div>
            <% } %>
            <%if (widget.steam.state == true && widget.steam.data.players != null) { %>
                <div class="card shadow rounded" style="background-color: #ffffff;">
                    <div class="card-header" style="background-color: #6200ee;color: #ffffff;">
                        <img src="https://png.icons8.com/metro/1600/steam.png" width="30" height="30">
                        How many players are playing <i class="font-weight-bold"><%= widget.steam.data.name %></i> ?
                    </div>
                    <img class="card-img-bottom" src="<%= 'https://steamcdn-a.akamaihd.net/steam/apps/' + widget.steam.data.id +'/header.jpg' %>">
                    <div class="card-body text-center">
                        <i class="font-weight-bold"><%= widget.steam.data.players.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ")%></i> players are currently playing in <i class="font-weight-bold"><%= widget.steam.data.name %></i>
                    </div>
                </div>
            <% } %>
            <% if (widget.ytLast.state || widget.ytSub.state || widget.ytViews.state) { %>
                <% if (widget.ytViews.state) { %>
                    <div class="card shadow rounded">
                        <div class="card-header" style="background-color: #6200ee;color: #ffffff;">
                            <img src="https://www.freeiconspng.com/uploads/youtube-logo-icon-symbol-18.png" width="30" height="30">
                            Number of views for <i class="font-weight-bold"><%= widget.ytViews.data.name %></i>
                        </div>
                        <div class="card-body">
                            <iframe style="width: 100%" src="<%= 'https://www.youtube.com/embed/' + widget.ytViews.data.id %>" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                        </div>
                        <div class="card-footer text-center">
                            <i class="font-weight-bold"><%= widget.ytViews.data.name %></i> has been viewed <i class="font-weight-bold"><%= widget.ytViews.data.views %></i> times.
                        </div>
                    </div>
                <% } %>
                <% if (widget.ytSub.state) { %>
                    <div class="card shadow rounded">
                        <div class="card-header" style="background-color: #6200ee;color: #ffffff;">
                            <img src="https://www.freeiconspng.com/uploads/youtube-logo-icon-symbol-18.png" width="30" height="30">
                            Number of subscribers for <i class="font-weight-bold"><%= widget.ytSub.data.name %></i>
                        </div>
                        <div class="card-body text-center">
                            Channel <i class="font-weight-bold"><%= widget.ytSub.data.name %></i> has <i class="font-weight-bold"><%= widget.ytSub.data.subs %></i> subscribers.
                        </div>
                    </div>
                <% } %>
                <% if (widget.ytLast.state) { %>
                    <div class="card shadow rounded">
                        <div class="card-header" style="background-color: #6200ee;color: #ffffff;">
                            <img src="https://www.freeiconspng.com/uploads/youtube-logo-icon-symbol-18.png" width="30" height="30">
                            <i class="font-weight-bold"><%= widget.ytLast.data.nbr %></i> last comment for <i class="font-weight-bold"><%= widget.ytLast.data.name %></i>
                        </div>
                        <div class="card-body">
                            <iframe style="width: 100%" src="<%= 'https://www.youtube.com/embed/' + widget.ytLast.data.id %>" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                        </div>
                        <div class="card-footer">
                            <% for (let i = 0; i < widget.ytLast.data.nbr; i++) { %>
                                <div><%= widget.ytLast.data.comments[i] %></div><br>
                            <% } %>
                        </div>
                    </div>
                <% } %>
            <% } %>
            <% if (widget.reddit.state) { %>

                    <div class="card shadow rounded">
                        <div class="card-header" style="background-color: #6200ee;color: #ffffff;">
                            <img src="https://vignette.wikia.nocookie.net/lakewood-plaza-turbo/images/e/ec/Reddit_Logo.png/revision/latest?cb=20180603190206" width="30" height="30">
                            <i class="font-weight-bold"><%= widget.reddit.data.nbr %></i> last posts for <i class="font-weight-bold"><%= widget.reddit.data.sub %></i> subreddit.
                        </div>
                        <div class="card-body">
                            <% for (let i = 0; i < widget.reddit.data.posts.length; i++) { %>
                                <a href="<%= widget.reddit.data.posts[i].link %>">#<%= i + 1 %> - <%= widget.reddit.data.posts[i].title %> by <%= widget.reddit.data.posts[i].author %></a><br>
                            <% } %>
                        </div>
                    </div>

            <% } %>
        </div>
    </body>
</html>